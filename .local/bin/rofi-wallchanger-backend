#!/bin/bash

#check if the user provided any argument
if [ "$#" -ne 1 ]; then

    echo "Usage: $0 <path_to_image>" 
    exit 1
fi

IMAGE="$1"

# Send notification to the user

notify-send "Changing Theme" "Applying new wallpaper and updating colors, please wait until confirmation..."

# Set wallpaper

swww img "$IMAGE" --transition-type="center" --transition-step=1 --transition-fps="60"

# Generate pywal colors

wal -i "$IMAGE" -n -e

# Make nvim use pywal colors

#python3 /home/user/.config/nvin/pywal/chadwal.py

# Use Matugen to generate Material You colors

matugen image "$IMAGE"

# Refresh waybar 
pkill waybar
waybar > /dev/null 2>&1 &

# Refresh swaync 
pkill swaync
swaync > /dev/null 2>&1 &

notify-send "Theme Applied" "Wallpaper and theme updated successfully!"
